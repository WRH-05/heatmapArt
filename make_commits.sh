#!/usr/bin/env bash
# make_commits.sh - Bash version for Linux/macOS
# Script to create "CHROME" on 2024 GitHub heatmap

set -e  # Exit on any error

file="index.html"

# Dates to form "CHROME" on 2024 GitHub heatmap (parsed from chrome-dates.txt)
# Same dates as make_commits.ps1 for identical results
dates=(
    "2024-01-07" "2024-01-08" "2024-01-09" "2024-01-10" "2024-01-11" "2024-01-12" "2024-01-13"
    "2024-01-14" "2024-01-15" "2024-01-16" "2024-01-17" "2024-01-18" "2024-01-19" "2024-01-20"
    "2024-01-21" "2024-01-22" "2024-01-26" "2024-01-27" "2024-01-28" "2024-01-29" "2024-02-02"
    "2024-02-03" "2024-02-04" "2024-02-05" "2024-02-09" "2024-02-10" "2024-02-11" "2024-02-12"
    "2024-02-16" "2024-02-17" "2024-02-25" "2024-02-26" "2024-02-27" "2024-02-28" "2024-02-29"
    "2024-03-01" "2024-03-02" "2024-03-03" "2024-03-04" "2024-03-05" "2024-03-06" "2024-03-07"
    "2024-03-08" "2024-03-09" "2024-03-13" "2024-03-14" "2024-03-20" "2024-03-21" "2024-03-24"
    "2024-03-25" "2024-03-26" "2024-03-27" "2024-03-28" "2024-03-29" "2024-03-30" "2024-03-31"
    "2024-04-01" "2024-04-02" "2024-04-03" "2024-04-04" "2024-04-05" "2024-04-06" "2024-04-14"
    "2024-04-15" "2024-04-16" "2024-04-17" "2024-04-18" "2024-04-19" "2024-04-20" "2024-04-21"
    "2024-04-22" "2024-04-23" "2024-04-24" "2024-04-25" "2024-04-26" "2024-04-27" "2024-04-28"
    "2024-04-29" "2024-05-01" "2024-05-02" "2024-05-05" "2024-05-06" "2024-05-08" "2024-05-09"
    "2024-05-10" "2024-05-12" "2024-05-13" "2024-05-14" "2024-05-15" "2024-05-16" "2024-05-17"
    "2024-05-18" "2024-05-20" "2024-05-21" "2024-05-22" "2024-05-24" "2024-05-25" "2024-06-02"
    "2024-06-03" "2024-06-04" "2024-06-05" "2024-06-06" "2024-06-07" "2024-06-08" "2024-06-09"
    "2024-06-10" "2024-06-11" "2024-06-12" "2024-06-13" "2024-06-14" "2024-06-15" "2024-06-16"
    "2024-06-17" "2024-06-21" "2024-06-22" "2024-06-23" "2024-06-24" "2024-06-28" "2024-06-29"
    "2024-06-30" "2024-07-01" "2024-07-02" "2024-07-03" "2024-07-04" "2024-07-05" "2024-07-06"
    "2024-07-07" "2024-07-08" "2024-07-09" "2024-07-10" "2024-07-11" "2024-07-12" "2024-07-13"
    "2024-07-21" "2024-07-22" "2024-07-23" "2024-07-24" "2024-07-25" "2024-07-26" "2024-07-27"
    "2024-07-28" "2024-07-29" "2024-07-30" "2024-07-31" "2024-08-01" "2024-08-02" "2024-08-03"
    "2024-08-05" "2024-08-06" "2024-08-12" "2024-08-13" "2024-08-14" "2024-08-19" "2024-08-20" 
    "2024-08-25" "2024-08-26" "2024-08-27" "2024-08-28" "2024-08-29" "2024-08-30" "2024-08-31" 
    "2024-09-01" "2024-09-02" "2024-09-03" "2024-09-04" "2024-09-05" "2024-09-06" "2024-09-07" 
    "2024-09-15" "2024-09-16" "2024-09-17" "2024-09-18" "2024-09-19" "2024-09-20" "2024-09-21"
    "2024-09-22" "2024-09-23" "2024-09-24" "2024-09-25" "2024-09-26" "2024-09-27" "2024-09-28" 
    "2024-09-29" "2024-09-30" "2024-10-02" "2024-10-04" "2024-10-05" "2024-10-06" "2024-10-07"
    "2024-10-09" "2024-10-11" "2024-10-12" "2024-10-13" "2024-10-14" "2024-10-16" "2024-10-18"
    "2024-10-19" "2024-10-20" "2024-10-21" "2024-10-23" "2024-10-25" "2024-10-26"
)

echo "Creating commits for CHROME heatmap art..."
echo "Total commits to create: ${#dates[@]}"

for d in "${dates[@]}"; do
  # append a small harmless line so each commit changes the file
  echo "<!-- commit for $d -->" >> "$file"

  # choose a time that avoids timezone/offset issues â€” use midday UTC
  export GIT_AUTHOR_DATE="${d}T12:00:00+00:00"
  export GIT_COMMITTER_DATE="${d}T12:00:00+00:00"

  git add "$file"
  git commit -m "art: $d"
  
  echo "Created commit for $d"
done

echo ""
echo "Done creating commits!"
echo "Now run: git push origin main"
echo ""
echo "Note: Make sure you're on the correct branch and have set up your remote repository."
